<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ•èµ„å›æµ‹æ¨¡æ‹Ÿå™¨</title>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-size: 18px;
            color: #666;
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading">æ­£åœ¨åŠ è½½æŠ•èµ„æ¨¡æ‹Ÿå™¨...</div>
    </div>

    <script type="text/babel">
        console.log('å¼€å§‹åŠ è½½Reactç»„ä»¶...');
        
        function InvestmentSimulator() {
            console.log('InvestmentSimulatorç»„ä»¶å¼€å§‹æ¸²æŸ“');
            
            const [monthlyAmount, setMonthlyAmount] = React.useState(1000);
            const [initialAmount, setInitialAmount] = React.useState(10000);
            const [years, setYears] = React.useState(10);
            const [selectedCountry, setSelectedCountry] = React.useState('US');
            const [selectedETF, setSelectedETF] = React.useState('SPY');
            const [selectedBank, setSelectedBank] = React.useState('SAVINGS');

            // ç®€åŒ–çš„å¸‚åœºæ•°æ®
            const markets = {
                US: {
                    name: 'ç¾å›½',
                    symbol: '$',
                    etfs: {
                        SPY: { name: 'S&P 500 ETF', returnRate: 10.5 },
                        QQQ: { name: 'NASDAQ ETF', returnRate: 12.8 }
                    },
                    banks: {
                        SAVINGS: { name: 'é«˜æ”¶ç›Šå‚¨è“„', returnRate: 4.2 },
                        CD: { name: 'å®šæœŸå­˜æ¬¾', returnRate: 4.8 }
                    }
                },
                CN: {
                    name: 'ä¸­å›½',
                    symbol: 'Â¥',
                    etfs: {
                        '510300': { name: 'æ²ªæ·±300ETF', returnRate: 8.5 },
                        '159915': { name: 'åˆ›ä¸šæ¿ETF', returnRate: 9.2 }
                    },
                    banks: {
                        TERM: { name: 'å®šæœŸå­˜æ¬¾', returnRate: 2.2 },
                        WEALTH: { name: 'ç†è´¢äº§å“', returnRate: 3.1 }
                    }
                }
            };

            // è®¡ç®—æŠ•èµ„ç»“æœ
            const calculateResults = () => {
                const market = markets[selectedCountry];
                const etfReturn = market.etfs[selectedETF].returnRate / 100;
                const bankReturn = market.banks[selectedBank].returnRate / 100;
                
                const months = years * 12;
                const monthlyETFRate = etfReturn / 12;
                const monthlyBankRate = bankReturn / 12;
                
                // ETFæŠ•èµ„è®¡ç®—ï¼ˆå¤åˆ©ï¼‰
                let etfValue = initialAmount;
                for (let i = 0; i < months; i++) {
                    etfValue = etfValue * (1 + monthlyETFRate) + monthlyAmount;
                }
                
                // é“¶è¡Œå­˜æ¬¾è®¡ç®—ï¼ˆå¤åˆ©ï¼‰
                let bankValue = initialAmount;
                for (let i = 0; i < months; i++) {
                    bankValue = bankValue * (1 + monthlyBankRate) + monthlyAmount;
                }
                
                const totalInvested = initialAmount + monthlyAmount * months;
                
                return {
                    etfValue: Math.round(etfValue),
                    bankValue: Math.round(bankValue),
                    totalInvested: Math.round(totalInvested),
                    etfReturn: ((etfValue - totalInvested) / totalInvested * 100).toFixed(1),
                    bankReturn: ((bankValue - totalInvested) / totalInvested * 100).toFixed(1)
                };
            };

            const results = calculateResults();
            const market = markets[selectedCountry];

            console.log('ç»„ä»¶æ•°æ®:', { selectedCountry, selectedETF, results });

            return React.createElement('div', {
                className: 'max-w-6xl mx-auto p-6 bg-gray-50 min-h-screen'
            }, [
                // æ ‡é¢˜
                React.createElement('h1', {
                    key: 'title',
                    className: 'text-3xl font-bold text-center text-gray-800 mb-8'
                }, 'ğŸ“ˆ æŠ•èµ„å›æµ‹æ¨¡æ‹Ÿå™¨'),

                // ä¸»è¦å†…å®¹åŒº
                React.createElement('div', {
                    key: 'content',
                    className: 'bg-white rounded-xl shadow-lg p-8'
                }, [
                    // å‚æ•°è®¾ç½®åŒº
                    React.createElement('div', {
                        key: 'controls',
                        className: 'grid md:grid-cols-2 gap-8 mb-8'
                    }, [
                        // å·¦ä¾§æ§åˆ¶
                        React.createElement('div', {
                            key: 'left-controls',
                            className: 'space-y-6'
                        }, [
                            // å›½å®¶é€‰æ‹©
                            React.createElement('div', { key: 'country' }, [
                                React.createElement('label', {
                                    className: 'block text-sm font-medium text-gray-700 mb-2'
                                }, 'é€‰æ‹©å¸‚åœº'),
                                React.createElement('div', {
                                    className: 'grid grid-cols-2 gap-2'
                                }, Object.entries(markets).map(([code, data]) =>
                                    React.createElement('button', {
                                        key: code,
                                        onClick: () => {
                                            setSelectedCountry(code);
                                            setSelectedETF(Object.keys(data.etfs)[0]);
                                            setSelectedBank(Object.keys(data.banks)[0]);
                                        },
                                        className: `p-3 rounded border text-sm font-medium ${
                                            selectedCountry === code 
                                                ? 'bg-blue-500 text-white' 
                                                : 'bg-gray-100 hover:bg-gray-200'
                                        }`
                                    }, data.name)
                                ))
                            ]),

                            // åˆå§‹æŠ•èµ„
                            React.createElement('div', { key: 'initial' }, [
                                React.createElement('label', {
                                    className: 'block text-sm font-medium text-gray-700 mb-2'
                                }, `åˆå§‹æŠ•èµ„: ${market.symbol}${initialAmount.toLocaleString()}`),
                                React.createElement('input', {
                                    type: 'range',
                                    min: 0,
                                    max: 100000,
                                    step: 1000,
                                    value: initialAmount,
                                    onChange: (e) => setInitialAmount(Number(e.target.value)),
                                    className: 'w-full'
                                })
                            ]),

                            // æ¯æœˆæŠ•èµ„
                            React.createElement('div', { key: 'monthly' }, [
                                React.createElement('label', {
                                    className: 'block text-sm font-medium text-gray-700 mb-2'
                                }, `æ¯æœˆæŠ•èµ„: ${market.symbol}${monthlyAmount.toLocaleString()}`),
                                React.createElement('input', {
                                    type: 'range',
                                    min: 100,
                                    max: 5000,
                                    step: 100,
                                    value: monthlyAmount,
                                    onChange: (e) => setMonthlyAmount(Number(e.target.value)),
                                    className: 'w-full'
                                })
                            ]),

                            // æŠ•èµ„å¹´é™
                            React.createElement('div', { key: 'years' }, [
                                React.createElement('label', {
                                    className: 'block text-sm font-medium text-gray-700 mb-2'
                                }, `æŠ•èµ„å¹´é™: ${years}å¹´`),
                                React.createElement('input', {
                                    type: 'range',
                                    min: 1,
                                    max: 30,
                                    value: years,
                                    onChange: (e) => setYears(Number(e.target.value)),
                                    className: 'w-full'
                                })
                            ])
                        ]),

                        // å³ä¾§äº§å“é€‰æ‹©
                        React.createElement('div', {
                            key: 'right-controls',
                            className: 'space-y-6'
                        }, [
                            // ETFé€‰æ‹©
                            React.createElement('div', { key: 'etf-select' }, [
                                React.createElement('label', {
                                    className: 'block text-sm font-medium text-gray-700 mb-2'
                                }, `${market.name}ETFäº§å“`),
                                React.createElement('div', {
                                    className: 'space-y-2'
                                }, Object.entries(market.etfs).map(([code, data]) =>
                                    React.createElement('label', {
                                        key: code,
                                        className: 'flex items-center p-3 border rounded cursor-pointer hover:bg-gray-50'
                                    }, [
                                        React.createElement('input', {
                                            type: 'radio',
                                            name: 'etf',
                                            checked: selectedETF === code,
                                            onChange: () => setSelectedETF(code),
                                            className: 'mr-3'
                                        }),
                                        React.createElement('div', {}, [
                                            React.createElement('div', {
                                                className: 'font-medium'
                                            }, `${code} - ${data.name}`),
                                            React.createElement('div', {
                                                className: 'text-sm text-green-600'
                                            }, `é¢„æœŸå¹´åŒ–æ”¶ç›Š: ${data.returnRate}%`)
                                        ])
                                    ])
                                ))
                            ]),

                            // é“¶è¡Œäº§å“é€‰æ‹©
                            React.createElement('div', { key: 'bank-select' }, [
                                React.createElement('label', {
                                    className: 'block text-sm font-medium text-gray-700 mb-2'
                                }, `${market.name}é“¶è¡Œäº§å“`),
                                React.createElement('div', {
                                    className: 'space-y-2'
                                }, Object.entries(market.banks).map(([code, data]) =>
                                    React.createElement('label', {
                                        key: code,
                                        className: 'flex items-center p-3 border rounded cursor-pointer hover:bg-gray-50'
                                    }, [
                                        React.createElement('input', {
                                            type: 'radio',
                                            name: 'bank',
                                            checked: selectedBank === code,
                                            onChange: () => setSelectedBank(code),
                                            className: 'mr-3'
                                        }),
                                        React.createElement('div', {}, [
                                            React.createElement('div', {
                                                className: 'font-medium'
                                            }, data.name),
                                            React.createElement('div', {
                                                className: 'text-sm text-orange-600'
                                            }, `å¹´åŒ–åˆ©ç‡: ${data.returnRate}%`)
                                        ])
                                    ])
                                ))
                            ])
                        ])
                    ]),

                    // ç»“æœå±•ç¤ºåŒº
                    React.createElement('div', {
                        key: 'results',
                        className: 'border-t pt-8'
                    }, [
                        React.createElement('h2', {
                            className: 'text-2xl font-bold text-gray-800 mb-6'
                        }, `${market.name}å¸‚åœºæŠ•èµ„å¯¹æ¯”ç»“æœ`),

                        // æ•°æ®å¡ç‰‡
                        React.createElement('div', {
                            className: 'grid md:grid-cols-4 gap-4 mb-6'
                        }, [
                            React.createElement('div', {
                                key: 'etf-value',
                                className: 'bg-blue-500 text-white rounded-lg p-4 text-center'
                            }, [
                                React.createElement('div', {
                                    className: 'text-sm opacity-90'
                                }, 'ETFæŠ•èµ„ä»·å€¼'),
                                React.createElement('div', {
                                    className: 'text-xl font-bold'
                                }, `${market.symbol}${results.etfValue.toLocaleString()}`)
                            ]),

                            React.createElement('div', {
                                key: 'bank-value',
                                className: 'bg-orange-500 text-white rounded-lg p-4 text-center'
                            }, [
                                React.createElement('div', {
                                    className: 'text-sm opacity-90'
                                }, 'é“¶è¡Œå­˜æ¬¾ä»·å€¼'),
                                React.createElement('div', {
                                    className: 'text-xl font-bold'
                                }, `${market.symbol}${results.bankValue.toLocaleString()}`)
                            ]),

                            React.createElement('div', {
                                key: 'total-invested',
                                className: 'bg-green-500 text-white rounded-lg p-4 text-center'
                            }, [
                                React.createElement('div', {
                                    className: 'text-sm opacity-90'
                                }, 'æ€»æŠ•å…¥'),
                                React.createElement('div', {
                                    className: 'text-xl font-bold'
                                }, `${market.symbol}${results.totalInvested.toLocaleString()}`)
                            ]),

                            React.createElement('div', {
                                key: 'advantage',
                                className: 'bg-purple-500 text-white rounded-lg p-4 text-center'
                            }, [
                                React.createElement('div', {
                                    className: 'text-sm opacity-90'
                                }, 'ETFä¼˜åŠ¿'),
                                React.createElement('div', {
                                    className: 'text-xl font-bold'
                                }, `${market.symbol}${(results.etfValue - results.bankValue).toLocaleString()}`)
                            ])
                        ]),

                        // åˆ†æè¯´æ˜
                        React.createElement('div', {
                            className: 'grid md:grid-cols-2 gap-6'
                        }, [
                            React.createElement('div', {
                                key: 'etf-analysis',
                                className: 'bg-blue-50 p-4 rounded-lg'
                            }, [
                                React.createElement('h3', {
                                    className: 'font-bold text-blue-800 mb-2'
                                }, 'ETFæŠ•èµ„åˆ†æ'),
                                React.createElement('div', {
                                    className: 'text-sm text-blue-700'
                                }, [
                                    React.createElement('div', {}, `é€‰æ‹©äº§å“: ${selectedETF} - ${market.etfs[selectedETF].name}`),
                                    React.createElement('div', {}, `æ€»æ”¶ç›Šç‡: ${results.etfReturn}%`),
                                    React.createElement('div', {}, `å¹´åŒ–æ”¶ç›Š: ${market.etfs[selectedETF].returnRate}%`)
                                ])
                            ]),

                            React.createElement('div', {
                                key: 'bank-analysis',
                                className: 'bg-orange-50 p-4 rounded-lg'
                            }, [
                                React.createElement('h3', {
                                    className: 'font-bold text-orange-800 mb-2'
                                }, 'é“¶è¡Œå­˜æ¬¾åˆ†æ'),
                                React.createElement('div', {
                                    className: 'text-sm text-orange-700'
                                }, [
                                    React.createElement('div', {}, `é€‰æ‹©äº§å“: ${market.banks[selectedBank].name}`),
                                    React.createElement('div', {}, `æ€»æ”¶ç›Šç‡: ${results.bankReturn}%`),
                                    React.createElement('div', {}, `å¹´åŒ–åˆ©ç‡: ${market.banks[selectedBank].returnRate}%`)
                                ])
                            ])
                        ]),

                        // æŠ•èµ„å»ºè®®
                        React.createElement('div', {
                            className: 'mt-6 p-4 bg-green-50 rounded-lg border-l-4 border-green-500'
                        }, [
                            React.createElement('h3', {
                                className: 'font-bold text-green-800 mb-2'
                            }, 'ğŸ’¡ æŠ•èµ„å»ºè®®'),
                            React.createElement('p', {
                                className: 'text-sm text-green-700'
                            }, `åœ¨${years}å¹´æŠ•èµ„æœŸå†…ï¼ŒETFæŠ•èµ„æ¯”é“¶è¡Œå­˜æ¬¾å¤šè·å¾—${market.symbol}${(results.etfValue - results.bankValue).toLocaleString()}æ”¶ç›Šã€‚ä½†è¯·æ³¨æ„ETFæŠ•èµ„å­˜åœ¨å¸‚åœºé£é™©ï¼Œå»ºè®®æ ¹æ®ä¸ªäººé£é™©æ‰¿å—èƒ½åŠ›åˆç†é…ç½®ã€‚`)
                        ])
                    ])
                ])
            ]);
        }

        // å®‰å…¨æ¸²æŸ“
        try {
            console.log('å‡†å¤‡æ¸²æŸ“åˆ°DOM...');
            ReactDOM.render(
                React.createElement(InvestmentSimulator),
                document.getElementById('root')
            );
            console.log('æ¸²æŸ“å®Œæˆ!');
        } catch (error) {
            console.error('æ¸²æŸ“é”™è¯¯:', error);
            document.getElementById('root').innerHTML = `
                <div style="padding: 40px; text-align: center; color: #e53e3e;">
                    <h2>âš ï¸ åº”ç”¨åŠ è½½å¤±è´¥</h2>
                    <p>é”™è¯¯ä¿¡æ¯: ${error.message}</p>
                    <p>è¯·æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°è·å–è¯¦ç»†ä¿¡æ¯ï¼Œæˆ–å°è¯•åˆ·æ–°é¡µé¢</p>
                    <button onclick="location.reload()" style="background: #4299e1; color: white; padding: 10px 20px; border: none; border-radius: 5px; margin-top: 10px; cursor: pointer;">
                        åˆ·æ–°é¡µé¢
                    </button>
                </div>
            `;
        }
    </script>
</body>
</html>
